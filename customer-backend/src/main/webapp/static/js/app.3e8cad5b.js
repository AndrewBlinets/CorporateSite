(function(t){function e(e){for(var r,a,i=e[0],u=e[1],s=e[2],f=0,l=[];f<i.length;f++)a=i[f],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);d&&d(e);while(l.length)l.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(o.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},a={app:0},c={app:0},o=[];function i(t){return u.p+"static/js/"+({}[t]||t)+"."+{"chunk-949762c0":"069acc9d","chunk-d6a5cda0":"f06f3619","chunk-008e74ee":"e73bc7fb","chunk-2eb2ba85":"bd6983fa","chunk-614843f5":"af1ca03b","chunk-bebc6eea":"122311ca","chunk-2646a1dd":"01d601c0","chunk-4b6544a2":"cc5ac6b2"}[t]+".js"}function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={"chunk-d6a5cda0":1,"chunk-008e74ee":1,"chunk-2eb2ba85":1,"chunk-614843f5":1,"chunk-bebc6eea":1,"chunk-2646a1dd":1,"chunk-4b6544a2":1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="static/css/"+({}[t]||t)+"."+{"chunk-949762c0":"31d6cfe0","chunk-d6a5cda0":"cc323a51","chunk-008e74ee":"2812e0d5","chunk-2eb2ba85":"83369d03","chunk-614843f5":"2812e0d5","chunk-bebc6eea":"80872365","chunk-2646a1dd":"ba5642c4","chunk-4b6544a2":"77ef9edf"}[t]+".css",c=u.p+r,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var s=o[i],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===c))return e()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){s=l[i],f=s.getAttribute("data-href");if(f===r||f===c)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||c,o=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[t],d.parentNode.removeChild(d),n(o)},d.href=c;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){a[t]=0})));var r=c[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise((function(e,n){r=c[t]=[e,n]}));e.push(r[2]=o);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,u.nc&&f.setAttribute("nonce",u.nc),f.src=i(t);var l=new Error;s=function(e){f.onerror=f.onload=null,clearTimeout(d);var n=c[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}c[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(e)},u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/customer/",u.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=f;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0f9a":function(t,e,n){"use strict";n.r(e);n("99af"),n("b0c0"),n("d3b7");var r=n("2909"),a=n("5530"),c=n("b775");function o(t){return Object(c["a"])({url:"/authenticate",method:"POST",data:t})}function i(){return console.log("logout"),Object(c["a"])({url:"/logoutCustomer",method:"GET"})}function u(){return Object(c["a"])({url:"/getInfoAboutCustomer",method:"GET"})}function s(t){return Object(c["a"])({url:"/userProfile",method:"POST",data:t})}var f=n("5f87"),l={token:Object(f["a"])(),id:null,name:"",surName:"",patronicName:"",email:"",organization:{},projects:[],roles:[]},d={SET_TOKEN:function(t,e){t.token=e},SET_ID:function(t,e){t.id=e},SET_NAME:function(t,e){t.name=e},SET_SUR_NAME:function(t,e){t.surName=e},SET_PATRONIC_NAME:function(t,e){t.patronicName=e},SET_EMAIL:function(t,e){t.email=e},SET_ORGANIZATION:function(t,e){t.organization=Object(a["a"])({},e)},SET_PROJECTS:function(t,e){t.projects=Object(r["a"])(e)},SET_ROLES:function(t,e){t.roles=e}},m={shortName:function(t){return"".concat(t.name," ").concat(t.surName)},fullName:function(t){return"".concat(t.name," ").concat(t.patronicName," ").concat(t.surName)},nameAvatar:function(t){return(t.name[0]+t.surName[0]||"a").toUpperCase()}},p={login:function(t,e){var n=t.commit;return new Promise((function(t,r){o(e).then((function(e){n("SET_TOKEN",e.token),Object(f["c"])(e.token),t()})).catch((function(t){r(t)}))}))},getInfo:function(t){var e=t.commit;return new Promise((function(t,n){u().then((function(n){var r=n.id,a=n.name,c=n.roles,o=n.surName,i=n.patronicName,u=n.email,s=n.org,f=n.projects;e("SET_ID",r),e("SET_NAME",a),e("SET_SUR_NAME",o),e("SET_PATRONIC_NAME",i),e("SET_EMAIL",u),e("SET_ORGANIZATION",s),e("SET_PROJECTS",f),e("SET_ROLES",c),t(n)})).catch((function(t){n(t)}))}))},saveProfile:function(t,e){var n=t.dispatch;return console.log("handle save profile"),new Promise((function(t,r){s(e).then((function(){n("getInfo"),t()})).catch((function(t){return r(t)}))}))},logout:function(t){var e=t.dispatch;return new Promise((function(t,n){i().then((function(){e("resetToken").then((function(){t()}))})).catch((function(t){n(t)}))}))},resetToken:function(t){var e=t.commit;return new Promise((function(t){e("SET_TOKEN",""),e("SET_ID",null),e("SET_NAME",""),e("SET_SUR_NAME",""),e("SET_PATRONIC_NAME",""),e("SET_EMAIL",""),e("SET_ORGANIZATION",{}),e("SET_PROJECTS",[]),e("SET_ROLES",[]),Object(f["b"])(),t()}))}};e["default"]={namespaced:!0,state:l,mutations:d,getters:m,actions:p}},"24d2":function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u}));var r=n("b775");function a(t){return Object(r["a"])({url:"/project/".concat(t),method:"GET"})}function c(){return Object(r["a"])({url:"/project/all",method:"GET"})}function o(){return Object(r["a"])({url:"/favorites",method:"GET"})}function i(t){return Object(r["a"])({url:"/favorites",method:"POST",data:t})}function u(t){return Object(r["a"])({url:"/favorites/".concat(t),method:"DELETE"})}},"31c2":function(t,e,n){"use strict";n.r(e),n.d(e,"hasPermission",(function(){return c})),n.d(e,"filterAsyncRoutes",(function(){return o}));n("99af"),n("4160"),n("caad"),n("45fc"),n("d3b7"),n("2532"),n("159b");var r=n("5530"),a=n("a18c");function c(t,e){return!e.meta||!e.meta.roles||t.some((function(t){return e.meta.roles.includes(t)}))}function o(t,e){var n=[];return t.forEach((function(t){var a=Object(r["a"])({},t);c(e,a)&&a.children&&(a.children=o(a.children,e)),n.push(a)})),n}var i={routes:[],addRoutes:[]},u={SET_ROUTES:function(t,e){t.addRoutes=e,t.routes=a["b"].concat(e)}},s={generateRoutes:function(t,e){var n=t.commit;return new Promise((function(t){var r=[];r=e.includes("admin")?a["a"]||[]:o(a["a"],e),n("SET_ROUTES",r),t(r)}))}};e["default"]={namespaced:!0,state:i,mutations:u,actions:s}},4360:function(t,e,n){"use strict";n("13d5"),n("d3b7"),n("ac1f"),n("5319"),n("ddb0");var r=n("a026"),a=n("2f62"),c={token:function(t){return t.user.token},roles:function(t){return t.user.roles},permission_routes:function(t){return t.permission.routes}},o=c;r["a"].use(a["a"]);var i=n("c653"),u=i.keys().reduce((function(t,e){var n=e.replace(/^\.\/(.*)\.\w+$/,"$1"),r=i(e);return t[n]=r.default,t}),{});e["a"]=new a["a"].Store({getters:o,modules:u})},"476c":function(t,e,n){},"4ad3":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"formatDate",(function(){return S}));n("4de4"),n("4160"),n("b64b"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("a026"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view")],1)},o=[],i={name:"App"},u=i,s=n("2877"),f=n("6544"),l=n.n(f),d=n("7496"),m=Object(s["a"])(u,c,o,!1,null,null,null),p=m.exports;l()(m,{VApp:d["a"]});var h=n("a18c"),b=n("4360"),v=n("f309");a["a"].use(v["a"]);var E=new v["a"]({icons:{iconfont:"mdi"}}),g=(n("c975"),n("5530")),T=(n("96cf"),n("1da1")),_=n("5f87"),O=["/login","/auth-redirect"];h["c"].beforeEach(function(){var t=Object(T["a"])(regeneratorRuntime.mark((function t(e,n,r){var a,c,o,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=Object(_["a"])(),!a){t.next=30;break}if("/login"!==e.path){t.next=6;break}r({path:"/"}),t.next=28;break;case 6:if(c=b["a"].getters.roles&&b["a"].getters.roles.length>0,!c){t.next=11;break}r(),t.next=28;break;case 11:return t.prev=11,t.next=14,b["a"].dispatch("user/getInfo");case 14:return o=t.sent,i=o.roles,t.next=18,b["a"].dispatch("permission/generateRoutes",i);case 18:u=t.sent,h["c"].addRoutes(u),r(Object(g["a"])({},e,{replace:!0})),t.next=28;break;case 23:return t.prev=23,t.t0=t["catch"](11),t.next=27,b["a"].dispatch("user/resetToken");case 27:r("/login?redirect=".concat(e.path));case 28:t.next=31;break;case 30:-1!==O.indexOf(e.path)?r():r("/login?redirect=".concat(e.path));case 31:case"end":return t.stop()}}),t,null,[[11,23]])})));return function(e,n,r){return t.apply(this,arguments)}}()),h["c"].afterEach((function(){}));n("99af");function S(t){if(!t)return"";var e=new Date(t),n=e.getDate(),r=e.getMonth()+1,a=e.getFullYear();return n<10&&(n="0".concat(n)),r<10&&(r="0".concat(r)),"".concat(n,".").concat(r,".").concat(a)}a["a"].config.productionTip=!1,Object.keys(r).forEach((function(t){a["a"].filter(t,r[t])})),new a["a"]({router:h["c"],store:b["a"],vuetify:E,render:function(t){return t(p)}}).$mount("#app")},"5f87":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return u}));var r=n("a78e"),a=n.n(r),c="ipps-client";function o(){return a.a.get(c)}function i(t){return a.a.set(c,t)}function u(){return a.a.remove(c)}},7850:function(t,e,n){"use strict";var r=n("476c"),a=n.n(r);a.a},a18c:function(t,e,n){"use strict";n.d(e,"b",(function(){return X})),n.d(e,"a",(function(){return tt}));n("d3b7");var r=n("a026"),a=n("8c4f"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("sidebar"),n("navbar"),n("app-main")],1)},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[n("v-container",{staticClass:"main-container",attrs:{fluid:""}},[n("router-view")],1)],1)},u=[],s={name:"AppMain"},f=s,l=(n("7850"),n("2877")),d=n("6544"),m=n.n(d),p=n("a523"),h=n("a75b"),b=Object(l["a"])(f,i,u,!1,null,"bdc5552a",null),v=b.exports;m()(b,{VContainer:p["a"],VContent:h["a"]});var E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{color:"#fff",elevation:"1",app:"","clipped-left":"","clipped-right":""}},[n("v-toolbar-title",[t._v("ИППС")]),n("v-spacer"),n("v-avatar",{staticClass:"mr-2",attrs:{color:"#1461ff"}},[n("span",{staticClass:"white--text"},[t._v(t._s(t.nameAvatar))])]),n("span",[t._v(t._s(t.shortName))])],1)},g=[],T=n("5530"),_=n("2f62"),O={name:"Navbar",computed:Object(T["a"])({},Object(_["c"])("user",["shortName","nameAvatar"]))},S=O,j=n("40dc"),k=n("8212"),P=n("2fa4"),N=n("2a7f"),A=Object(l["a"])(S,E,g,!1,null,null,null),I=A.exports;m()(A,{VAppBar:j["a"],VAvatar:k["a"],VSpacer:P["a"],VToolbarTitle:N["a"]});var y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{app:"",clipped:"",permanent:""}},[n("v-list",{attrs:{nav:""}},[n("v-list-item-group",{attrs:{color:"primary"}},[t._l(t.menu,(function(e,r){return n("sidebar-item",t._b({key:r},"sidebar-item",e,!1))})),n("v-list-item",{attrs:{color:"#F44336"},on:{click:t.logout}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-logout")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Выход")])],1)],1)],2)],1)],1)},w=[],R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",{attrs:{to:t.to}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.title))])],1)],1)},L=[],C={name:"SidebarItem",props:{icon:String,title:String,to:Object}},x=C,M=n("132d"),V=n("da13"),D=n("5d23"),G=n("34c3"),$=Object(l["a"])(x,R,L,!1,null,null,null),B=$.exports;m()($,{VIcon:M["a"],VListItem:V["a"],VListItemContent:D["a"],VListItemIcon:G["a"],VListItemTitle:D["c"]});var U={name:"Sidebar",components:{SidebarItem:B},computed:{menu:function(){return[{icon:"mdi-view-dashboard",title:"Dashboard",to:{name:"dashboard"}},{icon:"mdi-folder",title:"Проекты",to:{name:"projects"}},{icon:"mdi-cogs",title:"Настройки",to:{name:"settings"}}]}},methods:{logout:function(){var t=this;this.$store.dispatch("user/logout").then((function(){t.$router.push("/login?redirect=".concat(t.$route.fullPath))}))}}},J=U,F=n("8860"),K=n("1baa"),q=n("f774"),z=Object(l["a"])(J,y,w,!1,null,null,null),H=z.exports;m()(z,{VIcon:M["a"],VList:F["a"],VListItem:V["a"],VListItemContent:D["a"],VListItemGroup:K["a"],VListItemIcon:G["a"],VListItemTitle:D["c"],VNavigationDrawer:q["a"]});var Z={name:"Layout",components:{AppMain:v,Navbar:I,Sidebar:H}},Y=Z,Q=(n("b851"),Object(l["a"])(Y,c,o,!1,null,"cdbce5c8",null)),W=Q.exports;r["a"].use(a["a"]);var X=[{path:"/",component:W,redirect:"/dashboard",children:[{path:"dashboard",component:function(){return Promise.all([n.e("chunk-d6a5cda0"),n.e("chunk-614843f5")]).then(n.bind(null,"9406"))},name:"dashboard"},{path:"settings",component:function(){return Promise.all([n.e("chunk-d6a5cda0"),n.e("chunk-bebc6eea"),n.e("chunk-2646a1dd")]).then(n.bind(null,"61c2"))},name:"settings"},{path:"projects",component:function(){return Promise.all([n.e("chunk-d6a5cda0"),n.e("chunk-008e74ee")]).then(n.bind(null,"fa76"))},name:"projects"},{path:"projects/:id",component:function(){return Promise.all([n.e("chunk-d6a5cda0"),n.e("chunk-2eb2ba85")]).then(n.bind(null,"707c"))},name:"project-id",props:!0}]},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-d6a5cda0"),n.e("chunk-bebc6eea"),n.e("chunk-4b6544a2")]).then(n.bind(null,"9ed6"))}},{path:"/auth-redirect",component:function(){return n.e("chunk-949762c0").then(n.bind(null,"99f0"))}}],tt=[],et=function(){return new a["a"]({mode:"history",base:"/customer/",scrollBehavior:function(){return{y:0}},routes:X})},nt=et();e["c"]=nt},b775:function(t,e,n){"use strict";n("d3b7");var r=n("bc3a"),a=n.n(r),c=n("4360"),o=n("5f87"),i=a.a.create({baseURL:"/customer/api"});i.interceptors.request.use((function(t){return c["a"].getters.token&&(t.headers["Authorization"]="Bearer ".concat(Object(o["a"])())),t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){var e=t.data;return e}),(function(t){return Promise.reject(t)})),e["a"]=i},b851:function(t,e,n){"use strict";var r=n("4ad3"),a=n.n(r);a.a},bc2e:function(t,e,n){"use strict";n.r(e);n("7db0"),n("d3b7");var r=n("2909"),a=n("5530"),c=n("24d2"),o={project:{id:null,shortTitle:"",favorites:!1,customers:[]},rightPanel:!0},i={SET_PROJECT:function(t,e){t.project=Object(a["a"])({},e)},SET_RIGHT_PANEL:function(t,e){t.rightPanel=e},SET_FILES:function(t,e){t.files=Object(r["a"])(e)}},u={countMembers:function(t){return t.project.customers?t.project.customers.length:0},getFile:function(t){return function(e){return t.files.find((function(t){return t.id===e}))}}},s={getProject:function(t,e){var n=t.commit;return new Promise((function(t,r){Object(c["d"])(e).then((function(e){n("SET_PROJECT",e),t()})).catch((function(t){r(t)}))}))},toggleRightPanel:function(t){var e=t.state,n=t.commit;n("SET_RIGHT_PANEL",!e.rightPanel)},toggleProjectFavorites:function(t,e){var n=t.commit,r=e.id,o=e.favorites;return new Promise((function(t,i){o?Object(c["b"])(r).then((function(){n("SET_PROJECT",Object(a["a"])({},e,{favorites:!o})),t()})).catch((function(t){return i(t)})):Object(c["a"])({project:r}).then((function(){n("SET_PROJECT",Object(a["a"])({},e,{favorites:!o})),t()})).catch((function(t){return i(t)}))}))}};e["default"]={namespaced:!0,state:o,mutations:i,getters:u,actions:s}},c653:function(t,e,n){var r={"./app.js":"d9cd","./permission.js":"31c2","./project.js":"bc2e","./user.js":"0f9a"};function a(t){var e=c(t);return n(e)}function c(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=c,t.exports=a,a.id="c653"},d9cd:function(t,e,n){"use strict";n.r(e);var r={sidebar:!0},a={SET_SIDEBAR:function(t,e){t.sidebar=e},TOGGLE_SIDEBAR:function(t){t.sidebar=!t.sidebar}},c={openSidebar:function(t){var e=t.commit;e("SET_SIDEBAR",!0)},closeSidebar:function(t){var e=t.commit;e("SET_SIDEBAR",!1)},toggleSidebar:function(t){var e=t.commit;e("TOGGLE_SIDEBAR")}};e["default"]={namespaced:!0,state:r,mutations:a,actions:c}}});
//# sourceMappingURL=app.3e8cad5b.js.map