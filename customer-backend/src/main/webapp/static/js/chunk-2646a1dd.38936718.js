(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2646a1dd"],{"04d9":function(e,t,s){"use strict";var i=s("fb7c"),r=s.n(i);r.a},"0bc6":function(e,t,s){},2858:function(e,t,s){},4904:function(e,t,s){"use strict";var i=s("5e36"),r=s.n(i);r.a},"5e36":function(e,t,s){},"615b":function(e,t,s){},"61c2":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-row",{staticClass:"settings-container ma-n3",attrs:{align:"stretch","no-gutters":""}},[s("v-col",{attrs:{cols:"3"}},[s("settings-menu")],1),s("v-col",{staticClass:"pa-10",attrs:{cols:"7"}},[s("account")],1)],1)},r=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",{staticClass:"title mb-5"},[e._v("МОЯ УЧЁТНАЯ ЗАПИСЬ")]),s("account-card")],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{staticClass:"account-card",class:{"card-column":e.edit}},[s("div",{staticClass:"account-info"},[s("account-avatar"),s("account-info-list",{ref:"info",attrs:{edit:e.edit},on:{cancel:e.toggleEdit}})],1),e.edit?s("div",{staticClass:"btn-group"},[s("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"primary"},on:{click:e.toggleEdit}},[e._v(" Отменить ")]),s("v-btn",{staticClass:"ma-2",attrs:{color:"success"},on:{click:e.save}},[e._v("Сохранить")])],1):s("v-btn",{attrs:{large:"",color:"primary"},on:{click:e.toggleEdit}},[e._v(" Изменить ")])],1)},l=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-avatar",{staticClass:"account-avatar",attrs:{size:"120"}},[i("v-img",{attrs:{src:s("bc28")}})],1)},u=[],d={name:"AccountAvatar"},m=d,f=(s("4904"),s("2877")),v=s("6544"),h=s.n(v),p=s("8212"),g=s("adda"),b=Object(f["a"])(m,c,u,!1,null,"13563cf6",null),P=b.exports;h()(b,{VAvatar:p["a"],VImg:g["a"]});var w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-list",[s("v-list-item",{attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-subtitle",{staticClass:"caption"},[e._v(" ИМЯ ПОЛЬЗОВАТЕЛЯ"),e.edit?s("span",{staticClass:"red--text"},[e._v("*")]):e._e()]),e.edit?s("v-row",[s("v-col",{attrs:{cols:12}},[s("v-text-field",{ref:"surName",attrs:{label:"Фамилия",outlined:"",dense:"","hide-details":"auto","error-messages":e.surNameErrors},model:{value:e.userProfile.surName,callback:function(t){e.$set(e.userProfile,"surName","string"===typeof t?t.trim():t)},expression:"userProfile.surName"}})],1),s("v-col",{attrs:{cols:12}},[e.edit?s("v-text-field",{ref:"name",attrs:{label:"Имя",outlined:"",dense:"","hide-details":"auto","error-messages":e.nameErrors},model:{value:e.userProfile.name,callback:function(t){e.$set(e.userProfile,"name","string"===typeof t?t.trim():t)},expression:"userProfile.name"}}):e._e()],1),s("v-col",{attrs:{cols:12}},[e.edit?s("v-text-field",{ref:"patronicName",attrs:{label:"Отчество",outlined:"",dense:"","hide-details":"auto"},model:{value:e.userProfile.patronicName,callback:function(t){e.$set(e.userProfile,"patronicName","string"===typeof t?t.trim():t)},expression:"userProfile.patronicName"}}):e._e()],1)],1):s("v-list-item-title",[e._v(e._s(e.shortName))])],1)],1),s("v-list-item",{attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-subtitle",{staticClass:"caption"},[e._v(" EMAIL"),e.edit?s("span",{staticClass:"red--text"},[e._v("*")]):e._e()]),e.edit?s("v-text-field",{attrs:{outlined:"","single-line":"",dense:"","hide-details":"auto","error-messages":e.emailErrors},model:{value:e.userProfile.email,callback:function(t){e.$set(e.userProfile,"email","string"===typeof t?t.trim():t)},expression:"userProfile.email"}}):s("v-list-item-title",[e._v(e._s(e.email))])],1)],1),e.edit?s("v-list-item",{attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-subtitle",{staticClass:"caption"},[e._v(" ТЕКУЩИЙ ПАРОЛЬ"),e.edit?s("span",{staticClass:"red--text"},[e._v("*")]):e._e()]),s("v-text-field",{attrs:{outlined:"","single-line":"",dense:"",type:"password","hide-details":"auto","error-messages":e.passwordErrors},model:{value:e.userProfile.password,callback:function(t){e.$set(e.userProfile,"password","string"===typeof t?t.trim():t)},expression:"userProfile.password"}}),s("v-list-item-title")],1)],1):e._e(),e.edit&&!e.changePassword?s("v-list-item",[s("v-btn",{attrs:{text:"",small:"",color:"primary"},on:{click:function(t){e.changePassword=!0}}},[e._v(" Изменить пароль? ")])],1):e._e(),e.edit&&e.changePassword?s("v-list-item",{attrs:{"two-line":""}},[s("v-list-item-content",[s("v-list-item-subtitle",{staticClass:"caption"},[e._v(" НОВЫЙ ПАРОЛЬ"),e.edit?s("span",{staticClass:"red--text"},[e._v("*")]):e._e()]),s("v-text-field",{attrs:{outlined:"","single-line":"",dense:"",type:"password","hide-details":"auto","error-messages":e.newPasswordErrors},model:{value:e.userProfile.newPassword,callback:function(t){e.$set(e.userProfile,"newPassword","string"===typeof t?t.trim():t)},expression:"userProfile.newPassword"}}),s("v-list-item-title")],1)],1):e._e()],1)],1)},$=[],_=(s("b0c0"),s("5530")),x=s("1dce"),C=s("b5ae"),N=s("2f62"),E={name:"AccountInfoList",mixins:[x["validationMixin"]],props:{edit:Boolean},data:function(){return{changePassword:!1,userProfile:{id:null,surName:"",name:"",patronicName:"",email:"",password:"",newPassword:""},saveStatus:!1}},computed:Object(_["a"])({},Object(N["d"])("user",["id","surName","name","patronicName","email"]),{},Object(N["c"])("user",["shortName"]),{surNameErrors:function(){var e=[],t=this.$v.userProfile.surName;return t.$dirty?(!t.required&&e.push("Обязательное поле"),e):e},nameErrors:function(){var e=[],t=this.$v.userProfile.name;return t.$dirty?(!t.required&&e.push("Обязательное поле"),e):e},emailErrors:function(){var e=[],t=this.$v.userProfile.email;return t.$dirty?(!t.email&&e.push("Некоректный email"),!t.required&&e.push("Обязательное поле"),e):e},passwordErrors:function(){var e=[],t=this.$v.userProfile.password;return t.$dirty?("ERROR"===this.saveStatus&&e.push("Пароль не совпадает"),!t.minLength&&e.push("Поле должно быть больше ".concat(t.$params.minLength.min," символов")),!t.required&&e.push("Обязательное поле"),e):e},newPasswordErrors:function(){var e=[],t=this.$v.userProfile.newPassword;return t.$dirty?(!t.minLength&&e.push("Поле должно быть больше ".concat(t.$params.minLength.min," символов")),!t.notSameAsPassword&&e.push("Пароли не должны совпадать."),!t.required&&e.push("Обязательное поле"),e):e}}),watch:{edit:function(e){var t=this;e?this.$nextTick((function(){t.userProfile.surName?t.userProfile.name?t.userProfile.patronicName||t.$refs.patronicName.focus():t.$refs.name.focus():t.$refs.surName.focus()})):(this.changePassword=!1,this.userProfile.password="",this.userProfile.newPassword="",this.$v.userProfile.$reset())},id:{handler:function(e){this.userProfile.id=e},immediate:!0},surName:{handler:function(e){this.userProfile.surName=e},immediate:!0},name:{handler:function(e){this.userProfile.name=e},immediate:!0},patronicName:{handler:function(e){this.userProfile.patronicName=e},immediate:!0},email:{handler:function(e){this.userProfile.email=e},immediate:!0}},validations:{userProfile:{surName:{required:C["required"]},name:{required:C["required"]},email:{required:C["required"],email:C["email"]},password:{required:C["required"],minLength:Object(C["minLength"])(8)},newPassword:{required:Object(C["requiredIf"])((function(){return this.changePassword})),notSameAsPassword:Object(C["not"])(Object(C["sameAs"])("password")),minLength:Object(C["minLength"])(8)}}},methods:{handleSave:function(){var e=this;this.userProfile.password||this.userProfile.newPassword?(this.$v.userProfile.$touch(),this.$v.userProfile.$error||this.loading||(this.saveStatus="PENDING",this.$store.dispatch("user/saveProfile",this.userProfile).then((function(){e.saveStatus="OK",e.$emit("cancel")})).catch((function(t){e.saveStatus="ERROR",401===t.response.status&&(e.$refs.password.focus(),e.$v.userProfile.$touch())})))):this.$emit("cancel")}}},y=E,k=s("8336"),O=s("62ad"),L=s("8860"),V=s("da13"),j=s("5d23"),S=s("0fd9"),I=s("8654"),q=Object(f["a"])(y,w,$,!1,null,null,null),A=q.exports;h()(q,{VBtn:k["a"],VCol:O["a"],VList:L["a"],VListItem:V["a"],VListItemContent:j["a"],VListItemSubtitle:j["b"],VListItemTitle:j["c"],VRow:S["a"],VTextField:I["a"]});var B={name:"AccountCard",components:{AccountAvatar:P,AccountInfoList:A},data:function(){return{edit:!1}},methods:{save:function(){this.$refs.info.handleSave()},toggleEdit:function(){this.edit=!this.edit}}},R=B,M=(s("6b7d"),s("b0af")),T=Object(f["a"])(R,o,l,!1,null,"cd15001e",null),F=T.exports;h()(T,{VBtn:k["a"],VCard:M["a"]});var D={name:"Account",components:{AccountCard:F}},G=D,J=Object(f["a"])(G,a,n,!1,null,null,null),z=J.exports,H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-sheet",{staticClass:"settings-menu",attrs:{color:"#e3f2fd"}},[s("v-list",{attrs:{color:"#E3F2FD",width:"250px"}},[s("v-subheader",[e._v("НАСТРОЙКИ ПОЛЬЗОВАТЕЛЯ")]),s("v-list-item-group",{attrs:{color:"primary"}},e._l(e.menu,(function(t,i){return s("settings-menu-item",e._b({key:i},"settings-menu-item",t,!1))})),1)],1)],1)},K=[],Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-list-item",[s("v-list-item-content",[s("v-list-item-title",[e._v(e._s(e.title))])],1)],1)},U=[],W={name:"SettingsMenuItem",props:{title:String}},X=W,Y=Object(f["a"])(X,Q,U,!1,null,null,null),Z=Y.exports;h()(Y,{VListItem:V["a"],VListItemContent:j["a"],VListItemTitle:j["c"]});var ee={name:"SettingsMenu",components:{SettingsMenuItem:Z},data:function(){return{menu:[{title:"Моя учётная запись"}]}}},te=ee,se=(s("04d9"),s("1baa")),ie=s("8dd9"),re=(s("0bc6"),s("7560")),ae=s("58df"),ne=Object(ae["a"])(re["a"]).extend({name:"v-subheader",props:{inset:Boolean},render:function(e){return e("div",{staticClass:"v-subheader",class:Object(_["a"])({"v-subheader--inset":this.inset},this.themeClasses),attrs:this.$attrs,on:this.$listeners},this.$slots.default)}}),oe=Object(f["a"])(te,H,K,!1,null,"71f09346",null),le=oe.exports;h()(oe,{VList:L["a"],VListItemGroup:se["a"],VSheet:ie["a"],VSubheader:ne});var ce={name:"Settings",components:{Account:z,SettingsMenu:le}},ue=ce,de=(s("c09c"),Object(f["a"])(ue,i,r,!1,null,"0f5db310",null));t["default"]=de.exports;h()(de,{VCol:O["a"],VRow:S["a"]})},"6b7d":function(e,t,s){"use strict";var i=s("2858"),r=s.n(i);r.a},ae84:function(e,t,s){},b0af:function(e,t,s){"use strict";s("0481"),s("4069"),s("a9e3");var i=s("5530"),r=(s("615b"),s("10d2")),a=s("297c"),n=s("1c87"),o=s("58df");t["a"]=Object(o["a"])(a["a"],n["a"],r["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},outlined:Boolean,raised:Boolean,shaped:Boolean},computed:{classes:function(){return Object(i["a"])({"v-card":!0},n["a"].options.computed.classes.call(this),{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--outlined":this.outlined,"v-card--raised":this.raised,"v-card--shaped":this.shaped},r["a"].options.computed.classes.call(this))},styles:function(){var e=Object(i["a"])({},r["a"].options.computed.styles.call(this));return this.img&&(e.background='url("'.concat(this.img,'") center center / cover no-repeat')),e}},methods:{genProgress:function(){var e=a["a"].options.methods.genProgress.call(this);return e?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[e]):null}},render:function(e){var t=this.generateRouteLink(),s=t.tag,i=t.data;return i.style=this.styles,this.isClickable&&(i.attrs=i.attrs||{},i.attrs.tabindex=0),e(s,this.setBackgroundColor(this.color,i),[this.genProgress(),this.$slots.default])}})},c09c:function(e,t,s){"use strict";var i=s("ae84"),r=s.n(i);r.a},fb7c:function(e,t,s){}}]);
//# sourceMappingURL=chunk-2646a1dd.38936718.js.map