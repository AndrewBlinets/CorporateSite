{"version":3,"sources":["webpack:///./src/components/LanguageTabs/index.vue?91fa","webpack:///src/components/LanguageTabs/index.vue","webpack:///./src/components/LanguageTabs/index.vue?d1f8","webpack:///./src/components/LanguageTabs/index.vue","webpack:///./src/components/LanguageTabs/index.vue?3500","webpack:///./src/views/pages/Section.vue?19a6","webpack:///./src/views/pages/Section.vue?73b2","webpack:///src/views/pages/Section.vue","webpack:///./src/views/pages/Section.vue?0170","webpack:///./src/views/pages/Section.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_l","version","key","codeLanguage","mapLanguage","get","_t","staticRenderFns","name","props","languageVersions","type","Array","default","data","methods","inputContentLangueage","component","staticClass","_v","section","class","statusClassName","status","_s","_f","_e","model","value","form","callback","$$v","$set","expression","item","label","scopedSlots","_u","fn","ref","on","addBlock","block","index","id","spanCol","indexBlock","$event","removeBlock","content","setLanguageVersion","$router","push","saveSection","deleteSection","go","components","LanguageTabs","Editor","blocks","computed","length","hasAddBlock","beforeRouteEnter","sectionId","store","next","beforeRouteUpdate","console","log","resetSection","then","beforeRouteLeave","created","Object","keys","assign","destroy","updateSection","message","createSection","$confirm","find","map","splice","forEach"],"mappings":"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","file":"static/js/chunk-3569130c.118f34d0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-tabs',{attrs:{\"type\":\"border-card\"}},_vm._l((_vm.languageVersions),function(version){return _c('el-tab-pane',{key:version.codeLanguage,attrs:{\"label\":_vm.mapLanguage.get(version.codeLanguage)}},[_vm._t(\"language-version\",null,{\"version\":version})],2)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-tabs type=\"border-card\">\r\n    <el-tab-pane\r\n      v-for=\"version in languageVersions\"\r\n      :label=\"mapLanguage.get(version.codeLanguage)\"\r\n      :key=\"version.codeLanguage\"\r\n    >\r\n      <slot name=\"language-version\" :version=\"version\"/>\r\n    </el-tab-pane>\r\n  </el-tabs>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'LanguageTabs',\r\n  props: {\r\n    languageVersions: {\r\n      type: Array,\r\n      default: function() {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  data: () => ({\r\n    mapLanguage: new Map([\r\n      ['ru', 'Русский'],\r\n      ['by', 'Беларускі'],\r\n      ['en', 'English']\r\n    ])\r\n  }),\r\n  methods: {\r\n    inputContentLangueage(value) {\r\n      const keys = Object.keys(value);\r\n      this.languageVersions\r\n        .filter(item => item.codeLanguage === value[keys[0]])[0][keys[1]] = value[keys[1]];\r\n      \r\n      return this.languageVersions;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.el-tabs\r\n  margin-bottom: 22px\r\n  >.el-tabs__content\r\n    padding-left: 0\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=620cd26e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=620cd26e&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"620cd26e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=620cd26e&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=620cd26e&lang=stylus&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=style&index=0&id=50da545e&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=style&index=0&id=50da545e&lang=stylus&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-container\"},[_c('div',{staticClass:\"title\"},[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('h1',[_vm._v(\"Секция\")])]),(_vm.section.status)?_c('el-col',{staticClass:\"status\",attrs:{\"span\":6}},[_c('span',{class:_vm.statusClassName(_vm.section.status)},[_vm._v(_vm._s(_vm._f(\"pluralizationStatus\")(_vm.section.status)))])]):_vm._e()],1)],1),_c('el-select',{staticClass:\"mb-2\",attrs:{\"clearable\":\"\",\"placeholder\":\"Выбрать секцию\"},model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},_vm._l((_vm.typeOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),_c('language-tabs',{attrs:{\"languageVersions\":_vm.form.languageVersions},scopedSlots:_vm._u([{key:\"language-version\",fn:function(ref){\nvar version = ref.version;\nreturn [_c('el-row',{staticClass:\"mb-2\"},[_c('el-col',{staticClass:\"mb-1\",attrs:{\"span\":24}},[_c('h3',[_vm._v(\"Название\")])]),_c('el-col',{staticClass:\"mb-2\",attrs:{\"span\":12}},[_c('el-input',{model:{value:(version.name),callback:function ($$v) {_vm.$set(version, \"name\", $$v)},expression:\"version.name\"}})],1),(_vm.form.type === 1)?_c('el-col',{attrs:{\"span\":24}},[_c('el-row',[_c('el-col',{staticClass:\"mb-1\",attrs:{\"span\":24}},[_c('h3',[_vm._v(\"Блоки\")])]),(_vm.hasAddBlock)?_c('el-col',{staticClass:\"mb-2\",attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"success\",\"plain\":\"\"},on:{\"click\":_vm.addBlock}},[_vm._v(\"+ Добавить Блок\")])],1):_vm._e()],1),_c('el-row',{attrs:{\"gutter\":10}},_vm._l((version.blocks),function(block,index){return _c('el-col',{key:block.id,attrs:{\"span\":_vm.spanCol}},[(_vm.indexBlock !== 2)?_c('el-button',{staticClass:\"mb-1\",attrs:{\"type\":\"danger\",\"size\":\"mini\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.removeBlock(index)}}},[_vm._v(\"Удалить\")]):_vm._e(),_c('editor',{attrs:{\"content\":block.content},on:{\"input\":function($event){return _vm.setLanguageVersion($event, index, version.codeLanguage)}}})],1)}),1)],1):_vm._e(),(_vm.form.type === 2 && _vm.form.id)?_c('el-col',{attrs:{\"span\":24}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.push({ name: 'news' })}}},[_vm._v(\"Создать новость\")])],1):_vm._e()],1)]}}])}),_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"space-between\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.saveSection(1)}}},[_vm._v(\"Опубликовать\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.saveSection(3)}}},[_vm._v(\"Сохранить как черновик\")]),(_vm.section.id)?_c('el-button',{attrs:{\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.deleteSection}},[_vm._v(\"Удалить\")]):_vm._e()],1),_c('el-col',{attrs:{\"span\":3,\"align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"Отмена\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"page-container\">\r\n    <div class=\"title\">\r\n      <el-row type=\"flex\" justify=\"space-between\">\r\n        <el-col :span=\"12\">\r\n          <h1>Секция</h1>\r\n        </el-col>\r\n        <el-col\r\n          v-if=\"section.status\"\r\n          :span=\"6\"\r\n          class=\"status\"\r\n        >\r\n          <span :class=\"statusClassName(section.status)\">{{ section.status | pluralizationStatus }}</span>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    \r\n    <el-select\r\n      v-model=\"form.type\"\r\n      clearable\r\n      placeholder=\"Выбрать секцию\"\r\n      class=\"mb-2\"\r\n    >\r\n      <el-option\r\n        v-for=\"item in typeOptions\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\"\r\n      />\r\n    </el-select>\r\n\r\n    <language-tabs :languageVersions=\"form.languageVersions\" >\r\n      <template v-slot:language-version=\"{ version }\">\r\n        <el-row class=\"mb-2\">\r\n\r\n          <el-col :span=\"24\" class=\"mb-1\">\r\n            <h3>Название</h3>\r\n          </el-col>\r\n          <el-col :span=\"12\" class=\"mb-2\">\r\n            <el-input v-model=\"version.name\"></el-input>\r\n          </el-col>\r\n\r\n          <el-col\r\n            v-if=\"form.type === 1\"\r\n            :span=\"24\"\r\n          >\r\n            <el-row>\r\n              <el-col :span=\"24\" class=\"mb-1\">\r\n                <h3>Блоки</h3>\r\n              </el-col>\r\n              <el-col v-if=\"hasAddBlock\" :span=\"24\" class=\"mb-2\">\r\n                <el-button\r\n                  type=\"success\"\r\n                  plain\r\n                  @click=\"addBlock\"\r\n                >+ Добавить Блок</el-button>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row :gutter=\"10\">\r\n              <el-col\r\n                v-for=\"(block, index) in version.blocks\"\r\n                :key=\"block.id\"\r\n                :span=\"spanCol\"\r\n                class=\"\"\r\n              >\r\n                <el-button\r\n                  v-if=\"indexBlock !== 2\"\r\n                  type=\"danger\"\r\n                  size=\"mini\"\r\n                  plain\r\n                  class=\"mb-1\"\r\n                  @click=\"removeBlock(index)\"\r\n                >Удалить</el-button>\r\n                <editor\r\n                  :content=\"block.content\"\r\n                  @input=\"setLanguageVersion($event, index, version.codeLanguage)\"\r\n                />\r\n              </el-col>\r\n            </el-row>\r\n          </el-col>\r\n\r\n          <el-col\r\n            v-if=\"form.type === 2 && form.id\"\r\n            :span=\"24\"\r\n          >\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"$router.push({ name: 'news' })\"\r\n              >Создать новость</el-button>\r\n          </el-col>\r\n\r\n        </el-row>\r\n      </template>\r\n    </language-tabs>\r\n\r\n    <el-row type=\"flex\" justify=\"space-between\">\r\n      <el-col :span=\"12\" >\r\n        <el-button\r\n          type=\"success\"\r\n          @click=\"saveSection(1)\"\r\n        >Опубликовать</el-button>\r\n        <el-button\r\n          type=\"warning\"\r\n          plain\r\n          @click=\"saveSection(3)\"\r\n        >Сохранить как черновик</el-button>\r\n        <el-button\r\n          v-if=\"section.id\"\r\n          type=\"danger\"\r\n          plain\r\n          @click=\"deleteSection\"\r\n        >Удалить</el-button>\r\n      </el-col>\r\n      <el-col :span=\"3\" align=\"right\">\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"$router.go(-1)\"\r\n        >Отмена</el-button>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store';\r\nimport { mapState, mapActions } from 'vuex';\r\nimport LanguageTabs from '@/components/LanguageTabs';\r\nimport Editor from '@/components/Editor';\r\n\r\nexport default {\r\n  name: 'Section',\r\n  components: {\r\n    LanguageTabs,\r\n    Editor\r\n  },\r\n  data: () => ({\r\n    form: {\r\n      languageVersions: [\r\n        {\r\n          codeLanguage: 'ru',\r\n          name: '',\r\n          blocks: [\r\n            {\r\n              content: '',\r\n              index: 1\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          codeLanguage: 'by',\r\n          name: '',\r\n          blocks: [\r\n            {\r\n              content: '',\r\n              index: 1\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          codeLanguage: 'en',\r\n          name: '',\r\n          blocks: [\r\n            {\r\n              content: '',\r\n              index: 1\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    typeOptions: [\r\n      {\r\n        value: 1,\r\n        label: 'Текст'\r\n      },\r\n      {\r\n        value: 2,\r\n        label: 'Новости'\r\n      },\r\n      {\r\n        value: 3,\r\n        label: 'Ижображения'\r\n      }\r\n    ],\r\n  }),\r\n  computed: {\r\n    ...mapState({\r\n      section: state => state.section.section,\r\n      pageId: state => state.section.pageId\r\n    }),\r\n    spanCol() {\r\n      return 24 / this.form.languageVersions[0].blocks.length;\r\n    },\r\n    hasAddBlock() {\r\n      return this.form.languageVersions[0].blocks.length < 3;\r\n    },\r\n    indexBlock() {\r\n      return this.form.languageVersions[0].blocks.length + 1;\r\n    }\r\n  },\r\n  beforeRouteEnter (to, from, next) {\r\n    const { id, sectionId } = to.params;\r\n\r\n    if (sectionId) {\r\n      store.dispatch('section/getSection', sectionId).then(() => {\r\n        next();\r\n      });\r\n    } else {\r\n      store.commit('section/SET_PAGE_ID', id);\r\n      next();\r\n    }\r\n  },\r\n  beforeRouteUpdate (to, from, next) {\r\n    // eslint-disable-next-line no-console\r\n    console.log('beforeRouteUpdate');\r\n    const { sectionId } = to.params;\r\n\r\n    if (sectionId) {\r\n      store.dispatch('section/getSection', sectionId).then(() => {\r\n        next();\r\n      });\r\n    } else {\r\n      this.resetSection().then(() => {\r\n        next();\r\n      });\r\n    }\r\n  },\r\n  beforeRouteLeave (to, from, next) {\r\n    this.resetSection().then(() => {\r\n      next();\r\n    });\r\n  },\r\n  created() {\r\n    if (Object.keys(this.section).length !== 0) {\r\n      Object.assign(this.form, this.section);\r\n    }\r\n  },\r\n  destroy() {\r\n    this.resetSection();\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      createSection: 'section/createSection',\r\n      updateSection: 'section/updateSection',\r\n      deleleSection: 'section/deleteSection',\r\n      resetSection: 'section/resetSection'\r\n    }),\r\n    saveSection(status) {\r\n      if (this.section.id) {\r\n        this.updateSection({ ...this.form, status }).then(() => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: 'Секция обновлена'\r\n          });\r\n        });\r\n      } else {\r\n        this.createSection({ ...this.form, status, page: this.pageId }).then((id) => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: 'Секция сохранена'\r\n          });\r\n          this.$router.push({ name: 'section-id', params: { sectionId: id } });\r\n        });\r\n      }\r\n    },\r\n    deleteSection() {\r\n      this.$confirm('Вы точно хотите удалить?', {\r\n          confirmButtonText: 'Подтвердить',\r\n          cancelButtonText: 'Отменить',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          this.deleleSection(this.form.id).then(() => {\r\n            this.$message({\r\n              type: 'success',\r\n              message: 'Секция удалина'\r\n            });\r\n            this.$router.go(-1);\r\n          });\r\n        });\r\n    },\r\n    setLanguageVersion(value, index, codeLanguage) {\r\n      this.form.languageVersions.find(item => item.codeLanguage === codeLanguage)\r\n        .blocks[index].content = value;\r\n    },\r\n    addBlock() {\r\n      const index = this.indexBlock;\r\n      this.form.languageVersions.map(item => item.blocks.push({ content: '', index }));\r\n    },\r\n    removeBlock(index) {\r\n      this.form.languageVersions.map(item => {\r\n        item.blocks.splice(index, 1);\r\n        item.blocks.forEach((block, i)=> {\r\n          block.index = (i + 1);\r\n        });\r\n      });\r\n    },\r\n    statusClassName(status) {\r\n      if (status === 1) {\r\n        return 'success';\r\n      } else if (status === 3) {\r\n        return 'warning';\r\n      } else if (status === 4) {\r\n        return 'danger';\r\n      }\r\n      return '';\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.status\r\n  display: flex\r\n  align-items: center\r\n  justify-content: flex-end\r\n  color: #409eff\r\n  .success\r\n    color: #67c23a\r\n  .warning\r\n    color: #e6a23c\r\n  .danger\r\n    color: #f56c6c\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Section.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Section.vue?vue&type=template&id=50da545e&scoped=true&\"\nimport script from \"./Section.vue?vue&type=script&lang=js&\"\nexport * from \"./Section.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Section.vue?vue&type=style&index=0&id=50da545e&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"50da545e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}