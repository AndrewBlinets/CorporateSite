(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eb42c19"],{"1a06":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container customer-container"},[n("div",{staticClass:"title"},[n("el-row",{staticClass:"title",attrs:{type:"flex",justify:"space-between"}},[n("el-col",[n("h1",[e._v("Проект")])]),n("el-col",{staticClass:"add-customer"},[n("el-button",{attrs:{type:"success"},on:{click:function(t){e.openAddMembers=!0}}},[e._v(" + Добавить участников ")])],1)],1)],1),n("el-row",{staticClass:"customer-body",attrs:{gutter:20,type:"flex"}},[n("el-col",{attrs:{span:18}},[n("news-project")],1),n("el-col",{attrs:{span:6}},[n("add-files")],1)],1),n("members",{attrs:{open:e.openAddMembers},on:{close:function(t){e.openAddMembers=!1}}})],1)},r=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"Добавить участников",width:"400px",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.createMember?n("create-member",{on:{cancel:function(t){e.createMember=!1}}}):n("div",[n("el-button",{staticClass:"mb-1",attrs:{type:"success"},on:{click:function(t){e.createMember=!0}}},[e._v(" Создать участника ")]),n("members-list",{staticClass:"mb-2",model:{value:e.addCustomers,callback:function(t){e.addCustomers=t},expression:"addCustomers"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("Отмена")]),n("el-button",{attrs:{type:"primary"},on:{click:e.setMembers}},[e._v("Добавить")])],1)],1)],1)},o=[],i=(n("a9e3"),n("24d2")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{"label-width":"75px"}},[n("el-form-item",{attrs:{label:"Логин"}},[n("el-input",{model:{value:e.form.login,callback:function(t){e.$set(e.form,"login",t)},expression:"form.login"}})],1),n("el-form-item",{attrs:{label:"Пароль"}},[n("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("el-divider"),n("el-form-item",{attrs:{label:"Фамилия"}},[n("el-input",{model:{value:e.form.surName,callback:function(t){e.$set(e.form,"surName",t)},expression:"form.surName"}})],1),n("el-form-item",{attrs:{label:"Имя"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"Отчество"}},[n("el-input",{model:{value:e.form.patronicName,callback:function(t){e.$set(e.form,"patronicName",t)},expression:"form.patronicName"}})],1),n("el-form-item",{attrs:{label:"Email"}},[n("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"success"},on:{click:e.handleCreate}},[e._v("Создать")]),n("el-button",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("Отмена")])],1)],1)},l=[],u=n("b775");function m(e){return Object(u["a"])({url:"/customer/getList/".concat(e),method:"GET"})}function d(e){return Object(u["a"])({url:"/customer",method:"POST",data:e})}var f={name:"CreateMember",data:function(){return{form:{login:"",password:"",surName:"",name:"",patronicName:"",email:""}}},methods:{handleCreate:function(){var e=this;d(this.form).then((function(){e.$message({type:"success",message:"Участник создан"}),e.$emit("cancel")}))}}},p=f,b=n("2877"),h=Object(b["a"])(p,c,l,!1,null,null,null),v=h.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"members-container"},[n("el-input",{staticClass:"input-with-select"},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),n("el-divider"),n("el-checkbox-group",{staticClass:"members-list",model:{value:e.checkedMembers,callback:function(t){e.checkedMembers=t},expression:"checkedMembers"}},e._l(e.customers,(function(t){return n("el-checkbox",{key:t.id,staticClass:"member",attrs:{label:t.id}},[e._v(" "+e._s(t.surName)+" "+e._s(t.name)+" ")])})),1)],1)},g=[],_={name:"MembersList",props:{value:Array},data:function(){return{customers:[]}},computed:{checkedMembers:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.getCustomers()},methods:{getCustomers:function(){var e=this,t=this.$route.params.id;m(t).then((function(t){e.customers=t}))}}},C=_,j=(n("31fa"),Object(b["a"])(C,w,g,!1,null,"2aff0f1e",null)),y=j.exports,N={name:"Members",components:{CreateMember:v,MembersList:y},props:{projectId:{type:Number},open:{type:Boolean,default:!1}},data:function(){return{addCustomers:[],createMember:!1}},computed:{dialogVisible:function(){return this.open}},methods:{handleClose:function(){this.$emit("close")},setMembers:function(){var e=this,t=this.$route.params.id;Object(i["e"])(t,this.addCustomers).then((function(){e.$message({type:"success",message:"Участники добавлены"})}))}}},$=N,k=Object(b["a"])($,a,o,!1,null,null,null),x=k.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-upload",{attrs:{action:"#","http-request":e.uploadFileServer,"on-remove":e.deleteFile,"file-list":e.fileList}},[n("el-button",{attrs:{type:"primary"}},[e._v("Добавить файл")])],1)},O=[],E=(n("d81d"),n("2909")),F=n("3f5e");function S(e){return Object(u["a"])({url:"/documentForCustomer/byProject/".concat(e,"/all"),method:"GET"})}function T(e){return Object(u["a"])({url:"/documentForCustomer",method:"POST",data:e})}function A(e){return Object(u["a"])({url:"/documentForCustomer/".concat(e),method:"DELETE"})}var L={name:"AddFiles",data:function(){return{fileList:[]}},mounted:function(){this.getDocument()},methods:{getDocument:function(){var e=this,t=this.$route.params.id;S(t).then((function(t){e.fileList=Object(E["a"])(t.map((function(e){return{id:e.id,name:e.fileName}})))}))},uploadFileServer:function(e){var t=this,n=e.file,s=new FormData,r=this.$route.params.id;s.append("file",n),Object(F["b"])(s).then((function(e){T({fileManager:{id:e},project:{id:r}}).then((function(){t.$message({type:"success",message:"Файл добавлен"})}))}))},deleteFile:function(e){var t=this,n=e.id;A(n).then((function(){t.$message({type:"success",message:"Файл удалён"})}))}}},P=L,D=Object(b["a"])(P,M,O,!1,null,null,null),V=D.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"news-project__container"},[n("div",{staticClass:"news-list"},e._l(e.news,(function(t){return n("news-card",e._b({key:t.id},"news-card",t,!1))})),1),n("el-divider"),e.addNews?n("div",[n("el-form",{ref:"form",attrs:{"label-width":"190px"}},[n("content-project",e._b({on:{input:e.contentNews}},"content-project",e.newsForm,!1))],1),n("div",[n("el-button",{attrs:{type:"success"},on:{click:e.createNews}},[e._v(" Опубликовать ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addNews=!1}}},[e._v(" Отмена ")])],1)],1):n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addNews=!0}}},[e._v(" Новая нвость ")])],1)},J=[],q=(n("b0c0"),n("5530")),B=n("aa2a"),H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"news-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"title"},[e._v(e._s(e.title))]),n("span",{staticClass:"date"},[e._v(e._s(e._f("formatDate")(e.date)))])]),n("div",{staticClass:"content",domProps:{innerHTML:e._s(e.content)}})])},I=[],z={name:"NewsCard",props:{title:String,shortTitle:String,date:String,content:String}},K=z,Q=(n("dd1c"),Object(b["a"])(K,H,I,!1,null,null,null)),R=Q.exports,U=n("b8e6"),W={name:"NewsProject",components:{NewsCard:R,ContentProject:U["a"]},data:function(){return{addNews:!1,news:[],newsForm:{title:"",shortTitle:"",content:""}}},mounted:function(){this.getNews()},methods:{getNews:function(){var e=this,t=this.$route.params.id;Object(B["e"])(t).then((function(t){e.news=t}))},contentNews:function(e){var t=e.field;this.newsForm[t.name]=t.value},createNews:function(){var e=this,t=this.$route.params.id;Object(B["b"])(Object(q["a"])({project:{id:+t}},this.newsForm)).then((function(){e.getNews(),e.cleanSetNews()}))},cleanSetNews:function(){this.newsForm={title:"",shortTitle:"",content:""},this.addNews=!1}}},X=W,Y=(n("dc51"),Object(b["a"])(X,G,J,!1,null,"6c39fe40",null)),Z=Y.exports,ee={name:"CustomerProject",components:{Members:x,AddFiles:V,NewsProject:Z},data:function(){return{openAddMembers:!1}}},te=ee,ne=(n("8fed"),Object(b["a"])(te,s,r,!1,null,"cd5877e8",null));t["default"]=ne.exports},"29fd":function(e,t,n){},"31fa":function(e,t,n){"use strict";var s=n("29fd"),r=n.n(s);r.a},"3b84":function(e,t,n){},"70dc":function(e,t,n){"use strict";var s=n("80c7"),r=n.n(s);r.a},"80c7":function(e,t,n){},"8fed":function(e,t,n){"use strict";var s=n("3b84"),r=n.n(s);r.a},9379:function(e,t,n){},b8e6:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row-content"},[n("el-form-item",{attrs:{label:"Заголовок"}},[n("el-input",{attrs:{value:e.title},on:{input:function(t){return e.inputArticle("title",t)}}})],1),n("el-form-item",{attrs:{label:"Краткий заголовок"}},[n("el-input",{attrs:{value:e.shortTitle},on:{input:function(t){return e.inputArticle("shortTitle",t)}}})],1),n("el-form-item",{attrs:{label:"Содержание"}},[n("editor",{attrs:{content:e.content},on:{input:function(t){return e.inputArticle("content",t)}}})],1)],1)},r=[],a=n("095c"),o={name:"ContentProject",components:{Editor:a["a"]},props:{codeLanguage:{type:String,default:""},title:{type:String,default:""},shortTitle:{type:String,default:""},content:{type:String,default:""}},methods:{inputArticle:function(e,t){this.$emit("input",{codeLanguage:this.codeLanguage,field:{name:e,value:t}})}}},i=o,c=(n("70dc"),n("2877")),l=Object(c["a"])(i,s,r,!1,null,"4ca2b9a4",null);t["a"]=l.exports},dc51:function(e,t,n){"use strict";var s=n("9379"),r=n.n(s);r.a},dd1c:function(e,t,n){"use strict";var s=n("e2c3"),r=n.n(s);r.a},e2c3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1eb42c19.8ab4105f.js.map