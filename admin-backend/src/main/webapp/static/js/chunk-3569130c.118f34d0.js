(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3569130c"],{"41a7":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"border-card"}},e._l(e.languageVersions,(function(t){return n("el-tab-pane",{key:t.codeLanguage,attrs:{label:e.mapLanguage.get(t.codeLanguage)}},[e._t("language-version",null,{version:t})],2)})),1)},s=[],o=(n("4de4"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),{name:"LanguageTabs",props:{languageVersions:{type:Array,default:function(){return[]}}},data:function(){return{mapLanguage:new Map([["ru","Русский"],["by","Беларускі"],["en","English"]])}},methods:{inputContentLangueage:function(e){var t=Object.keys(e);return this.languageVersions.filter((function(n){return n.codeLanguage===e[t[0]]}))[0][t[1]]=e[t[1]],this.languageVersions}}}),c=o,i=(n("69fe"),n("2877")),r=Object(i["a"])(c,a,s,!1,null,"620cd26e",null);t["a"]=r.exports},"69fe":function(e,t,n){"use strict";var a=n("8301"),s=n.n(a);s.a},"82d9":function(e,t,n){"use strict";var a=n("acb6"),s=n.n(a);s.a},8301:function(e,t,n){},acb6:function(e,t,n){},c1d3:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"title"},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("h1",[e._v("Секция")])]),e.section.status?n("el-col",{staticClass:"status",attrs:{span:6}},[n("span",{class:e.statusClassName(e.section.status)},[e._v(e._s(e._f("pluralizationStatus")(e.section.status)))])]):e._e()],1)],1),n("el-select",{staticClass:"mb-2",attrs:{clearable:"",placeholder:"Выбрать секцию"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("language-tabs",{attrs:{languageVersions:e.form.languageVersions},scopedSlots:e._u([{key:"language-version",fn:function(t){var a=t.version;return[n("el-row",{staticClass:"mb-2"},[n("el-col",{staticClass:"mb-1",attrs:{span:24}},[n("h3",[e._v("Название")])]),n("el-col",{staticClass:"mb-2",attrs:{span:12}},[n("el-input",{model:{value:a.name,callback:function(t){e.$set(a,"name",t)},expression:"version.name"}})],1),1===e.form.type?n("el-col",{attrs:{span:24}},[n("el-row",[n("el-col",{staticClass:"mb-1",attrs:{span:24}},[n("h3",[e._v("Блоки")])]),e.hasAddBlock?n("el-col",{staticClass:"mb-2",attrs:{span:24}},[n("el-button",{attrs:{type:"success",plain:""},on:{click:e.addBlock}},[e._v("+ Добавить Блок")])],1):e._e()],1),n("el-row",{attrs:{gutter:10}},e._l(a.blocks,(function(t,s){return n("el-col",{key:t.id,attrs:{span:e.spanCol}},[2!==e.indexBlock?n("el-button",{staticClass:"mb-1",attrs:{type:"danger",size:"mini",plain:""},on:{click:function(t){return e.removeBlock(s)}}},[e._v("Удалить")]):e._e(),n("editor",{attrs:{content:t.content},on:{input:function(t){return e.setLanguageVersion(t,s,a.codeLanguage)}}})],1)})),1)],1):e._e(),2===e.form.type&&e.form.id?n("el-col",{attrs:{span:24}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"news"})}}},[e._v("Создать новость")])],1):e._e()],1)]}}])}),n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.saveSection(1)}}},[e._v("Опубликовать")]),n("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.saveSection(3)}}},[e._v("Сохранить как черновик")]),e.section.id?n("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteSection}},[e._v("Удалить")]):e._e()],1),n("el-col",{attrs:{span:3,align:"right"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("Отмена")])],1)],1)],1)},s=[],o=(n("7db0"),n("4160"),n("d81d"),n("a434"),n("b64b"),n("159b"),n("5530")),c=n("4360"),i=n("2f62"),r=n("41a7"),u=n("095c"),l={name:"Section",components:{LanguageTabs:r["a"],Editor:u["a"]},data:function(){return{form:{languageVersions:[{codeLanguage:"ru",name:"",blocks:[{content:"",index:1}]},{codeLanguage:"by",name:"",blocks:[{content:"",index:1}]},{codeLanguage:"en",name:"",blocks:[{content:"",index:1}]}]},typeOptions:[{value:1,label:"Текст"},{value:2,label:"Новости"},{value:3,label:"Ижображения"}]}},computed:Object(o["a"])(Object(o["a"])({},Object(i["d"])({section:function(e){return e.section.section},pageId:function(e){return e.section.pageId}})),{},{spanCol:function(){return 24/this.form.languageVersions[0].blocks.length},hasAddBlock:function(){return this.form.languageVersions[0].blocks.length<3},indexBlock:function(){return this.form.languageVersions[0].blocks.length+1}}),beforeRouteEnter:function(e,t,n){var a=e.params,s=a.id,o=a.sectionId;o?c["a"].dispatch("section/getSection",o).then((function(){n()})):(c["a"].commit("section/SET_PAGE_ID",s),n())},beforeRouteUpdate:function(e,t,n){console.log("beforeRouteUpdate");var a=e.params.sectionId;a?c["a"].dispatch("section/getSection",a).then((function(){n()})):this.resetSection().then((function(){n()}))},beforeRouteLeave:function(e,t,n){this.resetSection().then((function(){n()}))},created:function(){0!==Object.keys(this.section).length&&Object.assign(this.form,this.section)},destroy:function(){this.resetSection()},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])({createSection:"section/createSection",updateSection:"section/updateSection",deleleSection:"section/deleteSection",resetSection:"section/resetSection"})),{},{saveSection:function(e){var t=this;this.section.id?this.updateSection(Object(o["a"])(Object(o["a"])({},this.form),{},{status:e})).then((function(){t.$message({type:"success",message:"Секция обновлена"})})):this.createSection(Object(o["a"])(Object(o["a"])({},this.form),{},{status:e,page:this.pageId})).then((function(e){t.$message({type:"success",message:"Секция сохранена"}),t.$router.push({name:"section-id",params:{sectionId:e}})}))},deleteSection:function(){var e=this;this.$confirm("Вы точно хотите удалить?",{confirmButtonText:"Подтвердить",cancelButtonText:"Отменить",type:"warning"}).then((function(){e.deleleSection(e.form.id).then((function(){e.$message({type:"success",message:"Секция удалина"}),e.$router.go(-1)}))}))},setLanguageVersion:function(e,t,n){this.form.languageVersions.find((function(e){return e.codeLanguage===n})).blocks[t].content=e},addBlock:function(){var e=this.indexBlock;this.form.languageVersions.map((function(t){return t.blocks.push({content:"",index:e})}))},removeBlock:function(e){this.form.languageVersions.map((function(t){t.blocks.splice(e,1),t.blocks.forEach((function(e,t){e.index=t+1}))}))},statusClassName:function(e){return 1===e?"success":3===e?"warning":4===e?"danger":""}})},g=l,f=(n("82d9"),n("2877")),p=Object(f["a"])(g,a,s,!1,null,"50da545e",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-3569130c.118f34d0.js.map