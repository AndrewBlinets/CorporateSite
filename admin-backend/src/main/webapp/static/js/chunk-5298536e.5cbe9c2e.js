(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5298536e"],{"3ec5":function(t,e,n){"use strict";var a=n("edba"),i=n.n(a);i.a},"41a7":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-tabs",{attrs:{type:"border-card"}},t._l(t.languageVersions,(function(e){return n("el-tab-pane",{key:e.codeLanguage,attrs:{label:t.mapLanguage.get(e.codeLanguage)}},[t._t("language-version",null,{version:e})],2)})),1)},i=[],s=(n("4de4"),n("4ec9"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),{name:"LanguageTabs",props:{languageVersions:{type:Array,default:function(){return[]}}},data:function(){return{mapLanguage:new Map([["ru","Русский"],["by","Беларускі"],["en","English"]])}},methods:{inputContentLangueage:function(t){var e=Object.keys(t);return this.languageVersions.filter((function(n){return n.codeLanguage===t[e[0]]}))[0][e[1]]=t[e[1]],this.languageVersions}}}),r=s,o=(n("69fe"),n("2877")),c=Object(o["a"])(r,a,i,!1,null,"620cd26e",null);e["a"]=c.exports},"69fe":function(t,e,n){"use strict";var a=n("8301"),i=n.n(a);i.a},"6e0e":function(t,e,n){},"70dc":function(t,e,n){"use strict";var a=n("80c7"),i=n.n(a);i.a},"80c7":function(t,e,n){},8301:function(t,e,n){},b418:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-upload",{attrs:{action:"#","http-request":t.uploadFileServer,"file-list":t.fileList,"list-type":"picture-card","auto-upload":!0,limit:1},scopedSlots:t._u([{key:"file",fn:function(e){var a=e.file;return n("div",{staticClass:"file"},[n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}),n("span",{staticClass:"el-upload-list__item-actions"},[n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return t.handlePictureCardPreview(a)}}},[n("i",{staticClass:"el-icon-zoom-in"})]),t.disabled?t._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleDownload(a)}}},[n("i",{staticClass:"el-icon-download"})]),t.disabled?t._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(e){return t.handleRemove()}}},[n("i",{staticClass:"el-icon-delete"})])])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},i=[],s=(n("a9e3"),n("3f5e")),r={name:"UploadFile",props:{value:{type:Number}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,disabled:!1}},computed:{url:function(){return this.value?Object(s["a"])(this.value):""},fileList:{get:function(){var t=[];return this.value&&t.push({name:this.value,url:Object(s["a"])(this.value)}),t},set:function(t){this.$emit("input",t)}}},methods:{uploadFileServer:function(t){var e=this,n=t.file,a=new FormData;a.append("file",n),Object(s["b"])(a).then((function(t){e.$emit("input",t)}))},handleRemove:function(){this.$emit("input",null)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleDownload:function(t){var e=document.createElement("a");e.href=t.url,e.click()}}},o=r,c=(n("df56"),n("2877")),l=Object(c["a"])(o,a,i,!1,null,"235ea0ce",null);e["a"]=l.exports},b8e6:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row-content"},[n("el-form-item",{attrs:{label:"Заголовок"}},[n("el-input",{attrs:{value:t.title},on:{input:function(e){return t.inputArticle("title",e)}}})],1),n("el-form-item",{attrs:{label:"Краткий заголовок"}},[n("el-input",{attrs:{value:t.shortTitle},on:{input:function(e){return t.inputArticle("shortTitle",e)}}})],1),n("el-form-item",{attrs:{label:"Содержание"}},[n("editor",{attrs:{content:t.content},on:{input:function(e){return t.inputArticle("content",e)}}})],1)],1)},i=[],s=n("095c"),r={name:"ContentProject",components:{Editor:s["a"]},props:{codeLanguage:{type:String,default:""},title:{type:String,default:""},shortTitle:{type:String,default:""},content:{type:String,default:""}},methods:{inputArticle:function(t,e){this.$emit("input",{codeLanguage:this.codeLanguage,field:{name:t,value:e}})}}},o=r,c=(n("70dc"),n("2877")),l=Object(c["a"])(o,a,i,!1,null,"4ca2b9a4",null);e["a"]=l.exports},d790:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"title"},[n("el-row",{staticClass:"mb-2",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("h1",[t._v("Проект")])]),t.form.status?n("el-col",{staticClass:"status",attrs:{span:12}},[n("span",{class:t.statusClassName(t.form.status)},[t._v(" "+t._s(t._f("pluralizationStatus")(t.form.status))+" ")])]):t._e()],1),t.form.id?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"customer-priject"})}}},[t._v(" Работа с заказчиками ")]):t._e(),n("el-switch",{staticClass:"public-switch",attrs:{"inactive-text":"Публикация на портале"},model:{value:t.form.publicForClient,callback:function(e){t.$set(t.form,"publicForClient",e)},expression:"form.publicForClient"}})],1),n("div",{staticClass:"form-container mb-2"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"190px"}},[n("el-form-item",{attrs:{label:"Изображение заголовка"}},[n("upload-file",{model:{value:t.form.mainImage,callback:function(e){t.$set(t.form,"mainImage",e)},expression:"form.mainImage"}})],1),n("language-tabs",{attrs:{languageVersions:t.form.languageVersions},scopedSlots:t._u([{key:"language-version",fn:function(e){var a=e.version;return[n("content-project",t._b({on:{input:t.setLanguageVersion}},"content-project",a,!1))]}}])})],1)],1),n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveProject(1)}}},[t._v(" Сохранить ")]),n("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){return t.saveProject(3)}}},[t._v(" Сохранить как черновик ")]),t.form.id?n("el-button",{attrs:{type:"danger",plain:""},on:{click:t.deleteProjectById}},[t._v(" Удалить ")]):t._e()],1),n("el-col",{attrs:{span:3,align:"right"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({path:"/projects"})}}},[t._v(" Отмена ")])],1)],1)],1)},i=[],s=(n("7db0"),n("b0c0"),n("b64b"),n("5530")),r=n("4360"),o=n("2f62"),c=n("b418"),l=n("41a7"),u=n("b8e6"),f={name:"Project",components:{UploadFile:c["a"],LanguageTabs:l["a"],ContentProject:u["a"]},data:function(){return{form:{languageVersions:[{codeLanguage:"ru",title:"",shortTitle:"",content:""},{codeLanguage:"by",title:"",shortTitle:"",content:""},{codeLanguage:"en",title:"",shortTitle:"",content:""}],datePublic:"",mainImage:null,publicForClient:!0},dialogImageUrl:"",dialogVisible:!1,disabled:!1}},computed:Object(s["a"])({},Object(o["d"])({project:function(t){return t.project.project}})),beforeRouteEnter:function(t,e,n){var a=t.params.id;a?r["a"].dispatch("project/getProject",a).then((function(){n()})):n()},beforeRouteUpdate:function(t,e,n){var a=t.params.id;a?r["a"].dispatch("project/getProject",a).then((function(){n()})):this.resetProject().then((function(){n()}))},beforeRouteLeave:function(t,e,n){this.resetProject().then((function(){n()}))},created:function(){0!==Object.keys(this.project).length&&Object.assign(this.form,this.project)},destroy:function(){this.resetProject()},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])("project",["createProject","resetProject","updateProject","deleteProject"])),{},{setLanguageVersion:function(t){var e=t.codeLanguage,n=t.field;this.form.languageVersions.find((function(t){return t.codeLanguage===e}))[n.name]=n.value},saveProject:function(t){var e=this;this.form.status=t,this.form.id?this.updateProject(this.form).then((function(){e.$message({type:"success",message:"Проект обновлен"}),Object.assign(e.form,e.project)})):this.createProject(this.form).then((function(t){e.$message({type:"success",message:"Проект сохранен"}),e.$router.push({name:"project-id",params:{id:t}})}))},deleteProjectById:function(){var t=this;this.$confirm("Вы точно хотите удалить?",{confirmButtonText:"Подтвердить",cancelButtonText:"Отменить",type:"warning"}).then((function(){t.deleteProject(t.form.id).then((function(){t.$message({type:"success",message:"Новость удалина"}),t.$router.push({path:"/projects"})}))})).catch((function(){t.$message({type:"info",message:"Удаление отменено"})}))},statusClassName:function(t){return 1===t?"success":3===t?"warning":4===t?"danger":""}})},d=f,p=(n("3ec5"),n("2877")),m=Object(p["a"])(d,a,i,!1,null,"e19f2a32",null);e["default"]=m.exports},df56:function(t,e,n){"use strict";var a=n("6e0e"),i=n.n(a);i.a},edba:function(t,e,n){}}]);
//# sourceMappingURL=chunk-5298536e.5cbe9c2e.js.map