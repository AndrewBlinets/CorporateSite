(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-748d0e04"],{1525:function(e,t,n){"use strict";var a=n("821b"),s=n.n(a);s.a},"6e0e":function(e,t,n){},"70b4":function(e,t,n){"use strict";var a=n("7f62"),s=n.n(a);s.a},"7f62":function(e,t,n){},"821b":function(e,t,n){},8343:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container"},[n("div",{staticClass:"title"},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("h1",[e._v("Новость")])]),e.form.status?n("el-col",{staticClass:"status",attrs:{span:6}},[n("span",{class:e.statusClassName(e.form.status)},[e._v(e._s(e._f("pluralizationStatus")(e.form.status)))])]):e._e()],1)],1),n("el-row",{staticClass:"mb-2"},[n("el-col",{attrs:{lg:24,xl:16}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"190px"}},[n("el-form-item",{attrs:{label:"Изображение заголовка"}},[n("upload-file",{model:{value:e.form.mainImage,callback:function(t){e.$set(e.form,"mainImage",t)},expression:"form.mainImage"}})],1),n("language-tabs",{attrs:{languageVersions:e.form.languageVersions}}),n("el-form-item",{attrs:{label:"Дата публикации"}},[n("el-col",{attrs:{span:8}},[n("el-date-picker",{attrs:{type:"date",placeholder:"Выберите дату"},model:{value:e.form.datePublic,callback:function(t){e.$set(e.form,"datePublic",t)},expression:"form.datePublic"}})],1),n("el-col",{attrs:{span:8}},[n("el-time-picker",{attrs:{placeholder:"Выберите время"},model:{value:e.form.datePublic,callback:function(t){e.$set(e.form,"datePublic",t)},expression:"form.datePublic"}})],1)],1)],1)],1)],1),n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"success"},on:{click:function(t){return e.saveArticle(1)}}},[e._v("Опубликовать")]),n("el-button",{attrs:{type:"warning",plain:""},on:{click:function(t){return e.saveArticle(3)}}},[e._v("Сохранить как черновик")]),e.form.id?n("el-button",{attrs:{type:"danger",plain:""},on:{click:e.deleteArticle}},[e._v("Удалить")]):e._e()],1),n("el-col",{attrs:{span:3,align:"right"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({path:"/news"})}}},[e._v("Отмена")])],1)],1)],1)},s=[],i=(n("b64b"),n("5530")),l=n("4360"),r=n("2f62"),o=n("b418"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{attrs:{type:"border-card"}},e._l(e.languageVersions,(function(t){return n("el-tab-pane",{key:t.codeLanguage,attrs:{label:e.mapLanguage.get(t.codeLanguage)}},[n("content-article",e._b({on:{input:e.inputContentLangueage}},"content-article",t,!1))],1)})),1)},u=[],f=(n("4de4"),n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row-content"},[n("el-form-item",{attrs:{label:"Заголовок"}},[n("el-input",{attrs:{value:e.title},on:{input:function(t){return e.inputArticle("title",t)}}})],1),n("el-form-item",{attrs:{label:"Краткий заголовок"}},[n("el-input",{attrs:{value:e.shortTitle},on:{input:function(t){return e.inputArticle("shortTitle",t)}}})],1),n("el-form-item",{attrs:{label:"Вступительная речь"}},[n("el-input",{attrs:{value:e.entrySpeech,type:"textarea"},on:{input:function(t){return e.inputArticle("entrySpeech",t)}}})],1),n("el-form-item",{attrs:{label:"Содержание"}},[n("editor",{attrs:{content:e.content},on:{input:function(t){return e.inputArticle("content",t)}}})],1)],1)}),d=[],p=n("ade3"),m=n("095c"),g={name:"ContentArticle",components:{Editor:m["a"]},props:{codeLanguage:{type:String},title:{type:String,default:""},shortTitle:{type:String,default:""},entrySpeech:{type:String,default:""},content:{type:String,default:""}},methods:{inputArticle:function(e,t){this.$emit("input",Object(p["a"])({codeLanguage:this.codeLanguage},e,t))}}},b=g,h=(n("90b2"),n("2877")),v=Object(h["a"])(b,f,d,!1,null,"8a983d4a",null),w=v.exports,y={name:"LanguageTabs",components:{ContentArticle:w},props:{languageVersions:{type:Array,default:function(){return[]}}},data:function(){return{mapLanguage:new Map([["ru","Русский"],["by","Беларускі"],["en","English"]])}},methods:{inputContentLangueage:function(e){var t=Object.keys(e);return this.languageVersions.filter((function(n){return n.codeLanguage===e[t[0]]}))[0][t[1]]=e[t[1]],this.languageVersions}}},_=y,C=(n("70b4"),Object(h["a"])(_,c,u,!1,null,"69b4350a",null)),k=C.exports,j={name:"Article",components:{UploadFile:o["a"],LanguageTabs:k},data:function(){return{form:{languageVersions:[{codeLanguage:"ru",title:"",shortTitle:"",entrySpeech:"",content:""},{codeLanguage:"by",title:"",shortTitle:"",entrySpeech:"",content:""},{codeLanguage:"en",title:"",shortTitle:"",entrySpeech:"",content:""}],datePublic:"",mainImage:null},dialogImageUrl:"",dialogVisible:!1,disabled:!1}},computed:Object(i["a"])({},Object(r["d"])({news:function(e){return e.news.news}})),beforeRouteEnter:function(e,t,n){console.log("beforeRouteEnter");var a=e.params.id;a?l["a"].dispatch("news/getNews",a).then((function(){n()})):n()},beforeRouteUpdate:function(e,t,n){console.log("beforeRouteUpdate");var a=e.params.id;a?l["a"].dispatch("news/getNews",a).then((function(){n()})):this.resetNews().then((function(){n()}))},beforeRouteLeave:function(e,t,n){console.log("beforeRouteLeave"),this.resetNews().then((function(){n()}))},created:function(){0!==Object.keys(this.news).length&&Object.assign(this.form,this.news)},destroy:function(){this.resetNews()},methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])({createNews:"news/createNews",resetNews:"news/resetNews",updateNews:"news/updateNews",deleteNews:"news/deleteNews"})),{},{saveArticle:function(e){var t=this;this.form.status=e,this.form.id?this.updateNews(this.form).then((function(){t.$message({type:"success",message:"Новость обновлена"}),Object.assign(t.form,t.news)})):this.createNews(this.form).then((function(e){t.$message({type:"success",message:"Новость сохранена"}),t.$router.push({name:"news-id",params:{id:e}})}))},deleteArticle:function(){var e=this;this.$confirm("Вы точно хотите удалить?",{confirmButtonText:"Подтвердить",cancelButtonText:"Отменить",type:"warning"}).then((function(){e.deleteNews(e.form.id).then((function(){e.$message({type:"success",message:"Новость удалина"}),e.$router.push({path:"/news"})}))})).catch((function(){e.$message({type:"info",message:"Удаление отменино"})}))},statusClassName:function(e){return 1===e?"success":3===e?"warning":4===e?"danger":""}})},L=j,N=(n("1525"),Object(h["a"])(L,a,s,!1,null,"e018e9ea",null));t["default"]=N.exports},"8a54":function(e,t,n){},"90b2":function(e,t,n){"use strict";var a=n("8a54"),s=n.n(a);s.a},b418:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{attrs:{action:"#","http-request":e.uploadFileServer,"file-list":e.fileList,"list-type":"picture-card","auto-upload":!0,limit:1},scopedSlots:e._u([{key:"file",fn:function(t){var a=t.file;return n("div",{staticClass:"file"},[n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.url,alt:""}}),n("span",{staticClass:"el-upload-list__item-actions"},[n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(a)}}},[n("i",{staticClass:"el-icon-zoom-in"})]),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleDownload(a)}}},[n("i",{staticClass:"el-icon-download"})]),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove()}}},[n("i",{staticClass:"el-icon-delete"})])])])}}])},[n("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},s=[],i=(n("a9e3"),n("3f5e")),l={name:"UploadFile",props:{value:{type:Number}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,disabled:!1}},computed:{url:function(){return this.value?Object(i["a"])(this.value):""},fileList:{get:function(){var e=[];return this.value&&e.push({name:this.value,url:Object(i["a"])(this.value)}),e},set:function(e){this.$emit("input",e)}}},methods:{uploadFileServer:function(e){var t=this,n=e.file,a=new FormData;a.append("file",n),Object(i["b"])(a).then((function(e){t.$emit("input",e)}))},handleRemove:function(){this.$emit("input",null)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleDownload:function(e){var t=document.createElement("a");t.href=e.url,t.click()}}},r=l,o=(n("df56"),n("2877")),c=Object(o["a"])(r,a,s,!1,null,"235ea0ce",null);t["a"]=c.exports},df56:function(e,t,n){"use strict";var a=n("6e0e"),s=n.n(a);s.a}}]);
//# sourceMappingURL=chunk-748d0e04.25882c8b.js.map